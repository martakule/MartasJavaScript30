<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Marta Kule | JavasScript 30</title>
  <link rel="stylesheet" href="style.css">
</head>
<body onresize="iframeHeight()">

<div class="wrapper">

	<header>
		<img src="images/banner.jpg">
    <p class="subtitle">Marta’s JavaScript Workout</p>
    <div class="menu" id="menu">
      <span class="icon"><img src="images/menu.svg"></span>
      <span class="word">menu</span>
      <span class="close"><img src="images/close.svg"></span>
      <ul>
        <li data-target="00" class="itemSelected">00 intro</li>
        <li data-target="01">01 cat music</li>
        <li data-target="02">02 clock</li>
        <li data-target="03">03 controls</li>
        <li data-target="04">04 arrays one</li>
        <li data-target="05">05 panels</li>
        <li data-target="06">06 cities</li>
        <li data-target="07">07 arrays two</li>
        <li data-target="08">08 canvas</li>
        <li data-target="xx">xx credits</li>
      </ul>
    </div>
    <h1><span id="number">00</span><span id="title"> intro</span></h1>
	</header>

	<section>
    <p id="description">Hello world!</p>
		<iframe id="iframe" src="00.html" scrolling="no" onload="iframeHeight()"></iframe>
	</section>

  <section class="credits">

  </section>

</div> <!-- Wrapper div end-->

<script type="text/javascript">
// Make iframe responsive
  function iframeHeight() {
    var thisFrame = document.getElementById('iframe');
    if(thisFrame) {
     thisFrame.height = ( thisFrame.contentWindow.document.body.scrollHeight + (thisFrame.contentWindow.document.body.scrollHeight * 0.05) ) + "px";
    }
  }

// On load, read hash from URL
  window.onload = function(){
    var currentHash = window.location.hash.substr(1);
    if(!currentHash) {
      currentHash = "00";
      window.location.hash = currentHash;};

// Unhighlight first menu item
// and highlight the chosen menu item
    document.querySelector(".itemSelected").className = "";
    document.querySelector("[data-target='"+currentHash+"']").className = "itemSelected";

// Load appropriate iframe and title
    loadIt(currentHash);
  };

// Object with menu data
  var titles = {
    "item00":["intro","Hello world!"],
    "item01":["Cat Music","This is my variation on Wes’s original keyboard drum kit. I added click events to make it work on touch screens. To play the meows, tap or click on the tiles or press the corresponding keys on the keyboard."],
    "item02":["clock","This clock is made entirely of divs &mdash; the browser’s building blocks. Click or tap on the clock to see its ever simpler look."],
    "item03":["controls","Slider and colour picker are pretty new in browsers, so if you’re using an older one, you may not see them all. Otherwise, use the controls to change the picture’s look in real time."],
    "item04":["arrays one","This exercise was all on the code side, so I was wondering how to showcase what I learned about doing all kinds of things to arrays (lists) of data. Here is my array of colourful balls which you can manipulate with the buttons below."],
    "item05":["panels","This is just a fancy way to show inspirational quotes (if food inspires you as much as it does me). Tap or click on panels to open them."],
    "item06":["cities","This exercise fetches a list of 30 Canadian and 1,000 American cities from a server and saves them in a list that you can search. Start typing in the field below to get all matching city or state names, in alphabetical order. (Because of the limitations of my method of displaying this list, you'll need to resize the window to see more than 20 items at a time. Sorry.)"],
    "item07":["arrays two","This was another code-side exercise, in which I learned how to tell if an array has at least one or all of something, and where it is in the array. These methods work well in analyzing data, but how do I make them interactive? Here's my quick idea: select any of the kids' icons below and click the button to get a bizarre analysis of your little data set."],
    "item08":["canvas","[Before you start, this doesn't work on a touch screen yet, sorry. (Working on it!)] Have some fun with this simple drawing tool. You can mix the three basic colours or use the rainbow brush that doesn't blend but draws over existing strokes."],
    "itemxx":["credits","A huge thank you to all these generous creators:"]
  };

// Open and close menu
  document.getElementById("menu").addEventListener("click", function(e) {
    this.classList.toggle("openMenu");
  });

// Make menu items react to clicks
	document.querySelector('.menu ul').addEventListener('click', function (e) {
	  var target = e.target;

// Chanage color of currently selected menu item
		if (target.tagName === 'LI') {
	    e.currentTarget.querySelector('.itemSelected').classList.remove('itemSelected');
	    target.classList.add('itemSelected');
	  }

// Get selected item's data-target
		var currentSelection = target.getAttribute("data-target");

// Load address to iframe and title and description to h1
    loadIt(currentSelection)

// Change link hash
    window.location.hash = currentSelection;

// Focus iframe
    document.getElementById("iframe").focus();
	});

  function loadIt(what){
    document.getElementById("iframe").src = what+".html";
    document.getElementById("number").textContent = what + " ";
    document.getElementById("title").textContent = titles["item"+what][0];
    document.getElementById("description").innerHTML = titles["item"+what][1];
  }

</script>

</body>
</html>
