<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="style.css">
</head>
<body>

	<div class="controlButtons">
		<button id="analyze">Analyze</button>
		<div id="results"></div>
	</div>
	<div id="kids">
	</div>

<script type="text/javascript">

// 1. DATA FOR THE OBJECT
// Object constructor
  function Kids(name, hairColor, hairLength, glasses, clothes) {
    this.name = name;
    this.hairColor = hairColor;
    this.hairLength = hairLength;
    this.glasses = glasses;
    this.clothes = clothes;
  };

// Empty array for objects
  var kids = [],
// Arrays with data
      kidsName = ['Fang','Olsi','Marta','Calvin','Maryam','Dora','Laura','Matt','Kuru','Mindy','Alex','Taylor'],
      kidsHairColor = ['brown','brown','brown','none','brown','brown','blond','brown','brown','brown','blue','brown'],
      kidsHairLength = ['short','short','long','short','long','long','long','short','short','long','short','short'],
      kidsGlasses = ['no','no','no','no','no','no','yes','no','yes','no','no','no'],
      kidsClothes = ['blue','pink','red','red','orange','pink','blue','red','green','red','green','orange'];

// 2. MAKING AND DISPLAYING THE OBJECT
// Loop through all arrays and make kid objects
  for (var i = 0; i < kidsName.length; i++) {
    kids.push(
      new Kids(
        kidsName[i],kidsHairColor[i],kidsHairLength[i],kidsGlasses[i],kidsClothes[i]
    ));
  }

// Put all kids in divs and show on page
  var html = [];
  kids.forEach(function(kid){
    html.push('<div data-kid="'+kid.name+'"><img src="images/kids/'+kid.name+'.svg"><span>'+kid.name+'</span></div>')
  })
  document.getElementById("kids").innerHTML = html.join("");

// 3. SELECTING DATASET
// Toggle select on kids
  document.querySelectorAll("#kids > div").forEach(function(kid){
    kid.addEventListener("click", function(){
      this.classList.toggle("select");
    });
  });

  var kidNames = [];
  var dataSet = [];

// So much happens on this button click...

// 4. CREATING DATASET
  document.getElementById("analyze").addEventListener("click", function(){

// Button behaviour
    this.classList.add("pressed");

// Get names of selected kids
    Array.from(document.getElementsByClassName("select")).forEach(function(kidDiv){
        kidNames.push(kidDiv.getAttribute("data-kid"));
    });

// Push to dataSet those kid objects whose names match
    kidNames.forEach(function(kidName){
      kids.find(function(kidObject){
        if (kidObject.name == kidName){dataSet.push(kidObject)};
      });
    });
console.log(dataSet)
  // 5. ANALYZING DATASET: MAIN POINT OF EXERCISE
  // Use .every()
    if(dataSet.every(datum => (datum.clothes=="red"||datum.clothes=="pink"))){console.log("Everyone is wearing red or pink.")};

  // Use .some()
    dataSet.some(function(datum){});
    if(dataSet.some(datum => (datum.glasses=="yes"))){console.log("Someone is wearing glasses.")};

  // Use .find()
    if(dataSet.find(datum => (datum.name=="Kuru"))){console.log("Kuru is here!")};


  // Use .findIndex()
    var position = dataSet.findIndex(datum => (datum.name=="Kuru"));
    console.log("Kuru is " + (position+1) + " from the left.");
  });


// ALL BUTTON BEHAVIOUR
// End button press animation
  document.querySelectorAll(".controlButtons button").forEach(function(button){
    button.addEventListener("transitionend", function(e){
      if(e.propertyName !== "transform"){return}
      else{
        this.classList.remove("pressed");
      }
    });
  });

</script>

</body>
</html>